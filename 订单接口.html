目前订单的接口是这些
/order/placeOrder
/order/getOrder  
    参数: long orderid 订单的id
    返回: JSONObject order
    
/order/getOrderBySN
    参数: String order_sn 订单的编号
    返回: JSONObject order

/order/getOrders
    参数: int index, int size
    返回: JSONArray orders 返回当前用户的订单列表



    order的数据结构是这样的
    long m_order_id; // 总单id
    String m_order_sn; // 总单单号
    String order_sn; // 订单单号
    String barcode; // 条形码
    int order_status; // 订单状态(1:未确认;2:已确认;3:已付款;6:已取消;7已到款)
    String orderStatus; // 订单状态可读
    String is_paid_artist; // 是否与艺术家结算 是/否
    long add_time; // 下单时间 UNIX时间戳
    double order_fee; // 订单金额
    long cancel_time; // 订单取消时间 UNIX时间戳
    int pay_method; // 支付方式(1:支付宝;2:银联;3:财付通;4:微信支付;5:现金支付;6:pos机付款;7:银行转账)
    String payMethod; // 支付方式可读
    String pay_receiver; // 支付接收人
    long pay_time; // 支付时间 UNIX时间戳
    long shipping_time; // 发货时间 UNIX时间戳
    String shipping_sn; // 发货订单
    String shipping_type; // 物流公司
    long goods_id; // 商品id
    String goods_code; // 商品编号
    String goods_name; // 商品名称
    double goods_fee; // 商品金额
    int goods_num; // 商品数量
    long uid; // 买家用户id
    String buyer_name; // 买家姓名
    long consignee_id; // 收货人id
    String consignee_name; // 收货人姓名
    String province; // 收货地址 省
    String city; // 收货地址 市
    String district; // 收货地址 区
    String address; // 收货地址 详细地址
    String mobile; // 收货联系电话
    String order_source; // 订单来源
    int buy_type; // 购物车类型
    String user_valid; // 买家可见性
    String buy_notes; // 买家备注
    String seller_valid; // 卖家可见性
    String seller_notes; // 卖家备注
    String ip; // 下单ip
    double order_payment; // 支付金额
    String frame_fee; // 框裱费用
    String kefu_status; // 客服状态
    int print_count; // 商品版画总数
    int print_number; // 商品版画版号
    String order_source_notes; // 售出标识
    int integral; // 使用积分
    double integral_price; // 积分抵扣金额
    String logistics_status; // 物流状态
    String is_gy; // 是否为高艺订单 是/否

类型直接传其中的文本就可以,全部或空值则不作筛选




/artwork/getFiltedArtworks
参数: String pinlei, String price, String sort, String saleStatus, int index, int size
返回 JSONArray(数据结构同Artwork)

index 搜索页数
size 数据数量
pinlei类型直接传其中的文本就可以,全部或空值则不作筛选

price价格
全部或空值则不作筛选
<1000
1000-5000
5000-10000
10000-30000
30000-50000
50000-100000
>100000

sort排序
default或空值 默认
publish_date_desc 最新发布
price_asc 价格由低到高
price_desc 价格由高到低

year年份
2017
2016
2015
2014
2013
five_year 5年以内
2010-2013
2000-2009
1990-1999
1980-1989
<1980

saleStatus销售直接传其中的文本就可以,全部或空值则不作筛选


订单测试接口  url:"/newwap/order/getOrders"


order/getTestOrder 无参数  返回JSONObject
order/getTestOrders 参数 int index, int size  返回JSONArray

13120962959
123456


getTestFiltedOrders
测试用接口, 返回数据与用户无关
参数: String orderStatus, int index, int size

参数说明: 
    orderStatus 订单状态(待付款, 待收货, 已完成, 退款/售后), 全部或空值不做筛选
    index 检索页数
    size 数据数量
返回
JSONArray Order数据字段


getFiltedOrders
正式用接口, 返回数据与用户登陆信息有关
参数: String orderStatus, int index, int size

参数说明: 
    orderStatus 订单状态(待付款, 待收货, 已完成, 退款/售后), 全部或空值不做筛选
    index 检索页数
    size 数据数量
返回
JSONArray Order数据字段




package com.artgogo.newwap.service;

import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;

import org.nutz.dao.Cnd;
import org.nutz.dao.Condition;
import org.nutz.dao.pager.Pager;
import org.nutz.dao.util.cri.SqlExpressionGroup;
import org.nutz.ioc.loader.annotation.IocBean;
import org.nutz.log.Log;
import org.nutz.log.Logs;
import org.nutz.service.IdNameEntityService;

import com.artgogo.newwap.pojo.IndexContent;

@IocBean(fields="dao")
public class IndexContentService extends IdNameEntityService<IndexContent> {
  private static final Log log = Logs.get();
  final private int PAGER_SIZE = 1; // 默认pager大小
  final private int EXHIBITION_CATEGORY = 14471; // 展销频道号
  final private int INFORMATION_CATEGORY = 14472; // 咨询频道号
  final private int NEWS_CATEGORY = 14473; // 新闻频道号
  final private int BANNER_CATEGORY = 14648; // 线上活动频道号
    // 通用SQL条件  未删除以及状态为通过, 封面图不为空
    final private SqlExpressionGroup commonSqlExpression = Cnd.exps ("Active", "=", 1).and("Status", "=", 1)
        .and("Photo", "!=", "").and("Href", "!=", "");
  

  
  // 获取首页展销
  public IndexContent fetchExhibition(int index) {
    IndexContent indexContent = null;
    List<IndexContent> indexContents = dao().query(IndexContent.class, Cnd.where(commonSqlExpression)
        .and("Category", "=", EXHIBITION_CATEGORY)
        .desc("id"), getPager(index));
    if(indexContents.size() >= 1){
      indexContent = indexContents.get(0);
      // 转换时间
      if(indexContent.getSubjectDate() != null)
        indexContent.setDate(formatDate(indexContent.getSubjectDate()));
      
      return indexContent;
    } else return null;
  }
  
  // 获取首页资讯
  public IndexContent fetchInformation(int index) {
    IndexContent indexContent = null;
    List<IndexContent> indexContents = dao().query(IndexContent.class, Cnd.where(commonSqlExpression)
        .and("Category", "=", INFORMATION_CATEGORY)
        .desc("id"), getPager(index));
    if(indexContents.size() >= 1){
      indexContent = indexContents.get(0);
      // 转换时间
      if(indexContent.getSubjectDate() != null)
        indexContent.setDate(formatDate(indexContent.getSubjectDate()));
      
      return indexContent;
    } else return null;
  }
  
  // 获取首页新闻
  public IndexContent fetchNews(int index) {
    IndexContent indexContent = null;
    List<IndexContent> indexContents = dao().query(IndexContent.class, Cnd.where(commonSqlExpression)
        .and("Category", "=", NEWS_CATEGORY)
        .desc("id"), getPager(index));
    if(indexContents.size() >= 1){
      indexContent = indexContents.get(0);
      // 转换时间
      if(indexContent.getSubjectDate() != null)
        indexContent.setDate(formatDate(indexContent.getSubjectDate()));
      
      return indexContent;
    } else return null;
  }
  
  public IndexContent fetchContent(int index) {
    SqlExpressionGroup expression = Cnd.exps("Category", "=", BANNER_CATEGORY).or("Category", "=", EXHIBITION_CATEGORY)
                .or("Category", "=", INFORMATION_CATEGORY).or("Category", "=", NEWS_CATEGORY);
    IndexContent indexContent = null;
    List<IndexContent> indexContents = dao().query(IndexContent.class, Cnd.where(commonSqlExpression)
        .and(expression)
        .desc("id"), getPager(index));
    if(indexContents.size() >= 1){
      indexContent = indexContents.get(0);
      // 转换时间
      if(indexContent.getSubjectDate() != null)
        indexContent.setDate(formatDate(indexContent.getSubjectDate()));
      
      return indexContent;
    } else return null;
  }
  
  public List<IndexContent> getContents(int index, int size) {
    SqlExpressionGroup expression = Cnd.exps("Category", "=", BANNER_CATEGORY).or("Category", "=", EXHIBITION_CATEGORY)
                .or("Category", "=", INFORMATION_CATEGORY).or("Category", "=", NEWS_CATEGORY);
    List<IndexContent> indexContents = dao().query(IndexContent.class, Cnd.where(commonSqlExpression)
        .and(expression)
        .desc("id"), getPager(index));
    
    return indexContents;
  }
  
  public IndexContent fetch(long indexContentId) {
    return fetch(indexContentId);
  }
  
  public List<IndexContent> query(){
    return dao().query(IndexContent.class, null, getPager());
  }

  public List<IndexContent> query(Pager pager){
    return dao().query(IndexContent.class, null, pager);
  }
  
  public List<IndexContent> query(Condition condition){
    return dao().query(IndexContent.class, condition, getPager());
  }
  
  public List<IndexContent> query(Condition condition, Pager pager){
    return dao().query(IndexContent.class, condition, pager);
  }
  
  public Pager getPager(){
    Pager pager = dao().createPager(1, PAGER_SIZE);
    pager.setRecordCount(dao().count(IndexContent.class));
    return pager;
  }
  
  public Pager getPager(int index){
    if(index <= 0) {
      return getPager();
    } else {
      Pager pager = dao().createPager(index, PAGER_SIZE);
      pager.setRecordCount(dao().count(IndexContent.class));
      return pager;
    }
  }
  
  public Pager getPager(int index, int PAGER_SIZE){
    if(PAGER_SIZE <= 0) {
      return getPager(index);
    } else if(index <= 0) {
      return getPager();
    } else {
      Pager pager = dao().createPager(index, PAGER_SIZE);
      pager.setRecordCount(dao().count(IndexContent.class));
      return pager;
    }
  }
  
  public String formatDate(long seconds){
    SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy/MM/dd");
    Date date = new Date(seconds);
    
    return simpleDateFormat.format(date);
  }
  
  public String formatDate(Date date){
    SimpleDateFormat simpleDateFormat = new SimpleDateFormat("yyyy/MM/dd");
    
    return simpleDateFormat.format(date);
  }
}
